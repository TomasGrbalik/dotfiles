ZCONFIG=$HOME/.config/zsh/conf.d
source $ZCONFIG/config.zsh

ANTIDOTE_DIR=$ZDOTDIR/.antidote

## Bootstrap antidote
if [[ ! -d $ANTIDOTE_DIR ]]; then
  echo "Installing antidote..."
  git clone --depth=1 https://github.com/mattmc3/antidote.git $ANTIDOTE_DIR
fi

zsh_plugins=$ZDOTDIR/.zsh_plugins
if [[ ! ${zsh_plugins}.zsh -nt ${zsh_plugins}.txt ]]; then
  (
    source $ANTIDOTE_DIR/antidote.zsh
    antidote bundle <${zsh_plugins}.txt >${zsh_plugins}.zsh
  )
fi
source ${zsh_plugins}.zsh

source <(fzf --zsh)
eval "$(zoxide init zsh --cmd cd)"

source $ANTIDOTE_DIR/antidote.zsh
antidote load $ZDOTDIR/.zsh_plugins.txt

source $ZCONFIG/completions.zsh
source $ZCONFIG/aliases.zsh

[[ ! -f ~/.config/zsh/.p10k.zsh ]] || source ~/.config/zsh/.p10k.zsh